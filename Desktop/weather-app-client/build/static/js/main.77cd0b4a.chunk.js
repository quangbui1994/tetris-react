(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){},121:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(24),o=a.n(i),c=a(21),s=a(16),l=a(11),u=(a(64),a(14)),m=function(e,t){return Object(u.a)({},e,t)},p=function(e){return e<10&&(e="01"),e},d={city:0,spinner:!1},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_WEATHER_DATA_START":return m(e,{spinner:!0});case"FETCH_WEATHER_DATA_SUCCESS":return function(e,t){var a=m(e.city,{id:t.value.id,name:t.value.name,temp:t.value.main.temp,tempMin:t.value.main.temp_min,tempMax:t.value.main.temp_max,humidity:t.value.main.humidity,wind:t.value.wind,weather:t.value.weather});return m(e,{city:a,spinner:!1})}(e,t);case"SET_INITIAL_DATA_SUCCESS":return m(e,{city:t.res,spinner:!1});case"SET_INITIAL_DATA_START":return m(e,{spinner:!0});default:return e}},f={token:null,localId:null,err:null,spinner:!1},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_HANDLER_START":return m(e,{spinner:!0});case"AUTH_HANDLER_SUCCESS":return m(e,{token:t.token,localId:t.localId,spinner:!1});case"AUTH_HANDLER_FAIL":return m(e,{err:t.err});case"LOG_OUT_HANDLER":return m(e,{token:null,localId:null});default:return e}},y={idList:[],listCity:[],spinner:!1},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_DATA_HANDLER_SUCCESS":return function(e,t){var a=Object.values(t.IDs).map(function(e){return e.id});return m(e,{idList:a})}(e,t);case"GET_CITY_DATA_START":return m(e,{spinner:!0});case"GET_CITY_DATA_SUCCESS":return m(e,{listCity:t.listCity,spinner:!1});case"REMOVE_CITY_DATA":return function(e,t){console.log(t.id);var a=e.listCity.filter(function(e){return e.id!==t.id});return console.log(a),m(e,{listCity:a})}(e,t);case"LOG_OUT_HANDLER":return m(e,{idList:[],listCity:[]});default:return e}},E=(a(76),a(4)),b=a(6),_=a(8),w=a(7),N=a(9),S=a(3),O=(a(77),function(e){var t=null,a=["NavigationItem"];return e.forMobile&&a.push("forMobile"),t=localStorage.getItem("token")?[{linkName:"Home",to:"/"},{linkName:"My cities",to:"/mycities"},{linkName:"Logout",to:"/logout"}]:[{linkName:"Login",to:"/login"}],r.a.createElement("ul",{className:a.join(" ")},t.map(function(e){return r.a.createElement("li",{key:e.linkName},r.a.createElement(c.c,{to:e.to,exact:!0,activeClassName:"active"},e.linkName))}))}),j=a(53),k=a.n(j),A=function(e){return r.a.createElement("div",{className:k.a.DrawerToggle,onClick:e.click},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))},C=a(38),T=a.n(C),I=function(e){var t=[T.a.SideNav];return e.showSideNav||t.push(T.a.hidden),r.a.createElement("div",{className:t.join(" ")},r.a.createElement(O,{forMobile:!0}))},D=r.a.createContext(null),M=(a(83),a(84),function(e){var t=null;localStorage.getItem("token");return t=e.authUser?[{linkName:"Home",to:"/"},{linkName:"My cities",to:"/mycities"},{linkName:"Logout",to:"/logout"}]:[{linkName:"Login",to:"/login"}],r.a.createElement("ul",{className:"navigation__list"},t.map(function(e){return r.a.createElement("li",{key:e.linkName,className:"navigation__item"},r.a.createElement("a",{href:e.to,exact:!0,activeClassName:"active",className:"navigation__link"},e.linkName))}))}),F=function(e){return r.a.createElement("div",{class:"navigation"},r.a.createElement("input",{type:"checkbox",class:"navigation__checkbox",id:"navi-toggle"}),r.a.createElement("label",{for:"navi-toggle",class:"navigation__button"},r.a.createElement("span",{class:"navigation__icon"},"\xa0")),r.a.createElement("div",{class:"navigation__background"},"\xa0"),r.a.createElement("nav",{class:"navigation__nav"},r.a.createElement(D,null,function(e){return r.a.createElement(M,{authUser:e})})))},H=(a(85),function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(_.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={showSideNav:!1,showFullNav:!1},a}return Object(N.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"Navigation"},r.a.createElement("div",{className:"col-4-of-12"},r.a.createElement("span",Object.assign({className:"Logo"},this.props,{onClick:function(){e.props.history.push("/")}}),"Weather.")),r.a.createElement(A,{click:function(){return e.setState(function(e){return{showSideNav:!e.showSideNav}})}}),r.a.createElement("div",{className:"col-6-of-12 DesktopOnly"},r.a.createElement(F,{showFullNav:this.state.showFullNav,click:function(t){return e.setState({showFullNav:!0})}}))),r.a.createElement(I,{showSideNav:this.state.showSideNav}))}}]),t}(n.Component)),U=Object(S.f)(H),x=(a(86),a(22)),L=a.n(x),R=L.a.create({baseURL:"https://profound-outlet-241613.firebaseio.com"}),P=L.a.create({baseURL:"http://api.openweathermap.org/data/2.5"}),W=a(20),B=a.n(W),V=function(e,t){var a="?auth="+e+'&orderBy="localId"&equalTo="'+t+'"';return function(e){R.get("/user.json"+a).then(function(t){console.log(t),e({type:"SAVE_DATA_HANDLER_SUCCESS",IDs:t.data})}).catch(function(t){e(function(e){return{type:"FETCH_DATA_TO_REDUX_FAIL",err:e}}(t))})}},G=a(122),z=a(29),Y=a.n(z),J=a(54),K=a.n(J),q=function(){return r.a.createElement("div",{className:K.a.Modal},r.a.createElement("span",null,"Press Esc to exit the full screen mode"))},Q=(a(105),function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(_.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={markerPosition:{lat:null,lng:null},showFull:!1,showModal:!0},a.clickHandler=function(e){var t=m(a.state.markerPosition,{lat:e.latlng.lat,lng:e.latlng.lng});a.setState({markerPosition:t}),P.get("weather?lat=".concat(e.latlng.lat,"&lon=").concat(e.latlng.lng,"&appid=").concat(B.a.apiKeyOWM,"&units=metric")).then(function(t){console.log(t);var n={location:t.data.name,country:t.data.sys.country,weatherIconCode:t.data.weather[0].icon,weatherMain:t.data.weather[0].main,temp:t.data.main.temp,pressure:t.data.main.pressure,humidity:t.data.main.humidity,windSpeed:t.data.wind.speed,weatherDescription:t.data.weather[0].description,get weatherIcon(){return"http://openweathermap.org/img/w/".concat(this.weatherIconCode,".png")}},r="<div>\n                        <h3>Weather Info</h3>\n                            <div><img src=".concat(n.weatherIcon,' alt="weatherIcon"/></div>\n                            <div><span>').concat(n.weatherMain,": ").concat(n.weatherDescription,"</span></div>\n                            <br/>\n                            <div><span>Location: ").concat(n.location,", ").concat(n.country,"</span></div>\n                            <br/>\n                            <div><span>Temp: ").concat(n.temp,"\xb0C</span></div>\n                            <div><span>Pressure: ").concat(n.pressure,"hPa</span></div>\n                            <div><span>Humidity: ").concat(n.humidity,"%</span></div>\n                            <div><span>Wind Speed: ").concat(n.windSpeed,"km/h</span></div>\n                            <br/>\n                    </div>");Y.a.popup().setLatLng(e.latlng).setContent(r).openOn(a.map)})},a.keyPressHandler=function(e){console.log(e.key),"Escape"==e.key&&a.props.history.push("/")},a}return Object(N.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=Y.a.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'});this.map=Y.a.map("map",{center:[60.17,24.94],zoom:16,layers:[e]}).on("click",this.clickHandler),this.map.invalidateSize()}},{key:"componentDidUpdate",value:function(){this.marker=Y.a.marker(this.state.markerPosition).addTo(this.map).on("mouseover",this.clickHandler),this.map.invalidateSize()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"section"},r.a.createElement("div",Object.assign({},this.props,{id:"map",style:{width:"100%",height:"100vh",position:"absolute",top:"0",left:"0",zIndex:"2"},onMouseMove:function(){return e.setState({showModal:!1})},onKeyDown:function(t){return e.keyPressHandler(t)}})),r.a.createElement(G.a,{unmountOnExit:!0,timeout:500,in:this.state.showModal,className:"modal"},r.a.createElement(q,null)))}}]),t}(n.Component)),Z=Object(S.f)(Q),X=a(17),$=a(30),ee=a.n($),te=function(e){var t=null,a=[ee.a.InputElement];switch(!e.valid&&e.touched&&a.push(ee.a.invalid),e.elementtype){case"input":t=r.a.createElement("div",{className:ee.a.Input},r.a.createElement("input",Object.assign({className:a.join(" "),value:e.value,onChange:e.changed},e.elementconfig)),r.a.createElement("label",{className:ee.a.label,htmlFor:e.inputId},e.label));break;default:return t}return r.a.createElement("div",null,t)},ae=a(33),ne=a.n(ae),re=function(e){var t=[ne.a.Btn];return t.push(ne.a[e.btnType]),e.disabled&&t.push(ne.a.disabled),r.a.createElement("button",{type:e.type,className:t.join(" "),onClick:e.click},e.children)},ie=a(57),oe=a.n(ie),ce=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(_.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={searchForm:{city:{elementType:"input",elementConfig:{type:"text",placeholder:"City",id:"City"},value:"",label:"City",isValid:!1},country:{elementType:"input",elementConfig:{type:"text",placeholder:"Country",id:"Country"},value:"",label:"Country",isValid:!1}},formValid:!1},a.inputChangedHandler=function(e,t){var n=e.target.value,r=null;r=0===n.length?m(a.state.searchForm[t],{isValid:!1}):m(a.state.searchForm[t],{isValid:!0,value:n});var i=m(a.state.searchForm,Object(X.a)({},t,r)),o=!0;for(r in i)o=i[r].isValid&&o;a.setState({searchForm:i,formValid:o})},a.submitDataHandler=function(e){e.preventDefault();var t=Object.keys(a.state.searchForm).map(function(e){return Object(X.a)({},e,a.state.searchForm[e].value)});a.props.fetchWeatherData(t)},a}return Object(N.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"row"},r.a.createElement("h2",{className:"secondary__heading"},"Search"),r.a.createElement("form",{className:oe.a.SearchForm,onSubmit:this.submitDataHandler},Object.entries(this.state.searchForm).map(function(t){return r.a.createElement("div",{className:"col-4-of-12",key:t[1].label},r.a.createElement(te,{elementtype:t[1].elementType,elementconfig:t[1].elementConfig,inputId:t[1].elementConfig.id,label:t[1].label,changed:function(a){return e.inputChangedHandler(a,t[0])}}))}),r.a.createElement(re,{disabled:!this.state.formValid,btnType:"Btn-primary"},"See weather"),r.a.createElement(re,{btnType:"Btn-primary",click:function(){return e.props.history.push("/map")}},"Use Map")))}}]),t}(n.Component),se=Object(S.f)(Object(l.b)(null,function(e){return{fetchWeatherData:function(t){return e(function(e){var t=e[0].city,a=e[1].country;return function(e){e({type:"FETCH_WEATHER_DATA_START"}),P.get("weather?q=".concat(t,",").concat(a,"&appid=").concat(B.a.apiKeyOWM,"&units=metric")).then(function(t){console.log(t.data),e({type:"FETCH_WEATHER_DATA_SUCCESS",value:t.data})}).catch(function(t){e(function(e){return{type:"FETCH_WEATHER_DATA_FAIL",err:e}}(t))})}}(t))}}})(ce)),le=a(15),ue=a.n(le),me=function(e){return r.a.createElement("div",{className:"Item Item--front"},r.a.createElement("div",{className:"col-6-of-12 cityName--back"},r.a.createElement("h2",{className:"secondary__heading",style:{color:"floralwhite"}},e.cityName)),r.a.createElement("div",{className:"col-1-of-12"},r.a.createElement("div",{className:"temp"},e.temp,"\xb0"),r.a.createElement("div",{className:"description"},e.description)))},pe=(a(108),function(e){return r.a.createElement("div",null,r.a.createElement("i",{className:"icon ion-ios-".concat(e.iconName," ").concat(e.size)}))}),de=function(e){var t=["Item"];return e.forUser?t.push("Item--back--user"):t.push("Item--back"),r.a.createElement(ue.a,null,r.a.createElement("div",{className:t.join(" ")},r.a.createElement("div",{className:"col-12-of-12"},r.a.createElement("h2",{className:"secondary__heading",style:{color:"floralwhite"}},e.cityName)),r.a.createElement("div",{className:"col-3-of-12"},r.a.createElement("div",{className:"temp"},e.temp,"\xb0"),r.a.createElement("div",{className:"description"},e.description)),r.a.createElement("div",{className:"detailResult col-9-of-12"},r.a.createElement("div",{className:"row col-3-of-12 resultItem"},r.a.createElement("div",{className:"col-12-of-12"},r.a.createElement(pe,{iconName:"thermometer",size:"big"})),r.a.createElement("div",{className:"col-12-of-12 itemInfo"},r.a.createElement("div",{className:"col-6-of-12"},"Min. ",e.tempMin,"\xb0"),r.a.createElement("div",{className:"col-6-of-12"},"Max. ",e.tempMax,"\xb0"))),r.a.createElement("div",{className:"col-3-of-12 resultItem"},r.a.createElement("div",{className:"col-12-of-12"},r.a.createElement(pe,{iconName:"water",size:"big"})),r.a.createElement("div",{className:"col-12-of-12 itemInfo"},r.a.createElement("div",{className:"col-6-of-12"},"Humidity. ",e.humidity,"%"))),r.a.createElement("div",{className:"col-3-of-12 resultItem"},r.a.createElement("div",{className:"col-12-of-12"},r.a.createElement(pe,{iconName:"cloud-outline",size:"big"})),r.a.createElement("div",{className:"col-12-of-12 itemInfo"},r.a.createElement("div",{className:"col-6-of-12"},"Wind Speed. ",e.windSpeed," m/s"),r.a.createElement("div",{className:"col-6-of-12"},"Deg. ",e.windDeg,"\xb0"))),r.a.createElement("div",{className:"col-2-of-12 resultItem"},r.a.createElement("div",{className:"col-12-of-12"},r.a.createElement(re,{click:e.forUser?e.remove:e.add,btnType:"Btn-normal"},e.forUser?r.a.createElement(pe,{iconName:"trash",size:"big"}):r.a.createElement("span",null,"Add city")))))))},he=(a(109),function(e){function t(){return Object(E.a)(this,t),Object(_.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=["WeatherResultItem","section"],t=null;return this.props.forUser?(e.push("forUser"),t=r.a.createElement("div",{className:e.join(" ")},r.a.createElement(de,{forUser:this.props.forUser,cityName:this.props.cityName,temp:Math.round(this.props.temp),description:this.props.description,tempMin:this.props.tempMin,tempMax:this.props.tempMax,humidity:this.props.humidity,windSpeed:this.props.windSpeed,windDeg:this.props.windDeg,remove:this.props.remove,add:this.props.add}),r.a.createElement(me,{cityName:this.props.cityName,temp:Math.round(this.props.temp),description:this.props.description}))):t=r.a.createElement("div",{className:e.join(" ")},r.a.createElement(de,{forUser:this.props.forUser,cityName:this.props.city.name,temp:Math.round(this.props.city.temp),description:this.props.city.weather.map(function(e){return e.main}),tempMin:this.props.city.tempMin,tempMax:this.props.city.tempMax,humidity:this.props.city.humidity,windSpeed:this.props.city.wind.speed,windDeg:this.props.city.wind.deg,add:this.props.add})),r.a.createElement(ue.a,null,t)}}]),t}(n.Component)),fe=Object(l.b)(function(e){return{city:e.weather.city}})(he),ve={saveCity:function(e){return L.a.post("/api/cities",e).then(function(e){return e.data})}},ye=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(_.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).saveDataHandler=function(e,t){a.props.isAuthenticated?(a.props.saveDataHandler(e,t),ve.saveCity(a.props.city).then(function(e){return e}).catch(function(e){return console.log("error")})):a.props.history.push("/login")},a}return Object(N.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this,t=null===this.props.city?"":r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12-of-12"},r.a.createElement("h3",{className:"third__heading"},r.a.createElement("span",{className:"third__heading--first"},"Today /"),r.a.createElement("span",{className:"third__heading--second"},function(){var e=["January","February","March","April","May","June","July","August","September","October","November","December"][(new Date).getMonth()];return"".concat((new Date).getDate()," ").concat(e,", ").concat((new Date).getHours()," : ").concat(p((new Date).getMinutes()))}()))),r.a.createElement(fe,{cityName:this.props.city.name,temp:Math.round(this.props.city.temp),tempMin:this.props.city.temp_min,tempMax:this.props.city.temp_max,humidity:this.props.city.humidity,windSpeed:this.props.city.wind.speed,windDeg:this.props.city.wind.deg,description:this.props.city.weather[0].main,remove:function(){return e.removeDataHandler(e.props.city.id)},add:function(){return e.saveDataHandler(e.props.city.id,e.props.localId)}}));return r.a.createElement(ue.a,null,t)}}]),t}(n.Component),ge=Object(S.f)(Object(l.b)(function(e){return{city:e.weather.city,localId:e.auth.localId}},function(e){return{saveDataHandler:function(t,a){return e(function(e,t){var a=localStorage.getItem("token");console.log(t);var n={localId:t,id:e};return function(e){R.post("/user.json?auth="+a,n).then(function(n){e(V(a,t))})}}(t,a))}}})(ye)),Ee=(a(110),a(58)),be=a.n(Ee),_e=function(){return r.a.createElement("div",{className:be.a.Spinner})},we=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(_.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={showMap:!1,showFull:!1,isAuthenticated:null},a}return Object(N.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.setState({isAuthenticated:null!==this.props.token}),this.props.setInitialData()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Home"},r.a.createElement("div",{className:"row col-6-of-12"},r.a.createElement("h1",{className:"primary__heading title"},"Never Worry about Weather Forecast anymore")),r.a.createElement(se,{showMap:this.state.showMap,mapToggle:function(){return e.setState(function(e){return{showMap:!e.showMap}})}}),0===this.props.city?null:r.a.createElement(ge,{isAuthenticated:this.state.isAuthenticated}),r.a.createElement("div",{className:"row col-4-of-12"},r.a.createElement(G.a,{unmountOnExit:!0,timeout:500,in:this.state.showModal,className:"modal"},r.a.createElement(Z,{click:function(){return e.setState({showFull:!0},function(){return console.log(e.state.showFull)})},showFull:this.state.showFull}))),this.props.spinner&&r.a.createElement(_e,null))}}]),t}(n.Component),Ne=Object(l.b)(function(e){return{city:e.weather.city,token:e.auth.token,spinner:e.weather.spinner}},function(e){return{setInitialData:function(){return e(function(e){e({type:"SET_INITIAL_DATA_START"}),R.get("/city.json").then(function(t){e(function(e){return{type:"SET_INITIAL_DATA_SUCCESS",res:e}}(t.data))}).catch(function(t){e(function(e){return{type:"SET_INITIAL_DATA_FAIL",err:e}}(t))})})}}})(we),Se=(a(111),"/"),Oe="/home",je=a(34),ke=a.n(je),Ae=(a(112),a(114),{apiKey:"AIzaSyCmfJF90oW3AVz03mtGtldBPOW37JUaTRU",authDomain:"profound-outlet-241613.firebaseapp.com",databaseURL:"https://profound-outlet-241613.firebaseio.com",projectId:"profound-outlet-241613",storageBucket:"profound-outlet-241613.appspot.com",messagingSenderId:"177428683083",appId:"1:177428683083:web:f30e56df9cb0ca3c"}),Ce=function e(){var t=this;Object(E.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.doSignInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.doSignOut=function(){return t.auth.signOut()},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doPasswordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},this.user=function(e){return t.db.ref("users/".concat(e))},this.users=function(){return t.db.ref("users")},ke.a.initializeApp(Ae),this.auth=ke.a.auth(),this.db=ke.a.database()},Te=r.a.createContext(null),Ie=function(e){return function(t){return r.a.createElement(Te.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t,{firebase:a}))})}},De=Te,Me=Ce,Fe=(a(116),function(e){var t=["login-btn"];"Facebook"===e.name?t.push("FacebookStyle"):"Google"===e.name&&t.push("GoogleStyle");var a="http://localhost:3001/auth/".concat(e.linkTo),n=null;return"Google"===e.name?n="https://upload.wikimedia.org/wikipedia/commons/2/2d/Google_Plus_logo_2015.svg":"Facebook"===e.name&&(n="https://upload.wikimedia.org/wikipedia/commons/c/c2/F_icon.svg"),r.a.createElement("div",{className:"col-6-of-12"},r.a.createElement("a",{href:a,style:{textDecoration:"none"}},r.a.createElement("div",{class:t.join(" ")},r.a.createElement("div",{class:"login-icon-wrapper"},r.a.createElement("img",{class:"login-icon-svg",src:n,alt:e.name})),r.a.createElement("p",{class:"btn-text"},r.a.createElement("b",null,"Sign in with ",e.name)))))}),He=(a(117),function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6-of-12"},r.a.createElement("div",{className:"LineSeparator"},"Quickly sign in?")))}),Ue="ADMIN",xe={controls:{email:{elementType:"input",elementConfig:{type:"text",placeholder:"Email"},label:"Email:",value:"",validation:{required:!0,isEmail:!0},valid:!1,touched:!1},password:{elementType:"input",elementConfig:{type:"password",placeholder:"Password"},label:"Password:",value:"",validation:{required:!0,minLength:6},valid:!1,touched:!1}},isAdmin:!1,isFormValid:!1,goSignup:!1,error:null},Le=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(_.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state=Object(u.a)({},xe),a.authModeHandler=function(){a.setState(function(e){return{goSignup:!e.goSignup}})},a.validCheckHandler=function(e){var t=Object(u.a)({},a.state.controls[e]);t.value.length>0&&(t=m(t,{valid:!0}));var n=m(a.state.controls,Object(X.a)({},e,t)),r=!0;for(t in n)r=n[t].valid&&r;a.setState({controls:n,isFormValid:r})},a.inputChangedHandler=function(e,t){var n,r=e.target.value;n=r.length>0?m(a.state.controls[t],{valid:!0,value:r,touched:!0}):m(a.state.controls[t],{valid:!1,value:r});var i=m(a.state.controls,Object(X.a)({},t,n)),o=!0;for(n in i)o=i[n].valid&&o;a.setState({controls:i,isFormValid:o})},a.submitFormHandler=function(e){var t=a.state.controls.email.value,n=a.state.controls.password.value,r={};a.state.isAdmin&&(r[Ue]=Ue),console.log(r),e.preventDefault(),a.state.goSignup?a.props.firebase.doCreateUserWithEmailAndPassword(t,n).then(function(e){return console.log(e),a.props.firebase.user(e.user.uid).set({email:t,roles:r})}).then(function(e){a.setState(Object(u.a)({},xe)),a.props.history.push(Oe)}).catch(function(e){return a.setState({error:e})}):a.props.firebase.doSignInWithEmailAndPassword(t,n).then(function(e){a.setState(Object(u.a)({},xe)),a.props.history.push(Oe)}).catch(function(e){a.setState({error:e})})},a.onChangeCheckBoxHandler=function(e){a.setState(Object(X.a)({},e.target.name,e.target.checked))},a}return Object(N.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this,t={color:"#1abc9c",fontWeight:"300",display:"block",padding:"10px 0",marginRight:"1rem"},a=Object.entries(this.state.controls).map(function(t){return r.a.createElement("div",{key:t[0],className:"row col-12-of-12"},r.a.createElement("div",{className:"col-6-of-12"},r.a.createElement(te,{valid:t[1].valid,elementtype:t[1].elementType,elementconfig:t[1].elementConfig,value:t[1].value,label:t[1].label,touched:t[1].touched,changed:function(a){return e.inputChangedHandler(a,t[0])}})))}),n=r.a.createElement("div",{className:"row col-12-of-12 errorMessage"},this.state.error?r.a.createElement("span",{className:"message"},this.state.error.message):r.a.createElement("span",{className:"message"},"Please fill the form")),i=r.a.createElement(ue.a,null,r.a.createElement("div",{className:"row col-6-of-12"},r.a.createElement("h1",{className:"primary__heading title"},!0===this.state.goSignup?"Sign up":"Log in")),n,r.a.createElement("form",{className:"Form",onSubmit:this.submitFormHandler},a,r.a.createElement("div",{className:"row"},r.a.createElement(re,{disabled:!this.state.isFormValid,btnType:"Btn-primary"},"Submit"),r.a.createElement(re,{type:"button",btnType:"Switch",click:function(){return e.authModeHandler(e.state.goSignup)}},"SWITCH TO ",this.state.goSignup?"LOGIN":"SIGN UP"),r.a.createElement(c.b,{to:"/pw-reset",style:t},"Forget Password?"),r.a.createElement("label",{style:t},"Admin:",r.a.createElement("input",{type:"checkbox",name:"isAdmin",onChange:this.onChangeCheckBoxHandler,checked:this.state.isAdmin})))),r.a.createElement(He,null),r.a.createElement("div",{className:"row col-6-of-12"},r.a.createElement(Fe,{name:"Google"}),r.a.createElement(Fe,{name:"Facebook"})));return this.props.spinner&&(i=r.a.createElement(_e,null)),localStorage.getItem("token")&&(i=r.a.createElement(S.a,{to:"/"})),r.a.createElement(ue.a,null,i)}}]),t}(n.Component),Re=Object(S.f)(Ie(Object(l.b)(function(e){return{token:e.auth.token,err:e.auth.err,spinner:e.auth.spinner}})(Le))),Pe=function(e){function t(){return Object(E.a)(this,t),Object(_.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.props.firebase.doSignOut(),this.props.history.push(Se)}},{key:"render",value:function(){return null}}]),t}(n.Component),We=Object(S.f)(Ie(Pe)),Be=(a(118),a(32)),Ve=function(e){return function(t){var a=function(a){function n(){return Object(E.a)(this,n),Object(_.a)(this,Object(w.a)(n).apply(this,arguments))}return Object(N.a)(n,a),Object(b.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.listener=this.props.firebase.auth.onAuthStateChanged(function(a){e(a)||t.props.history.push(Se)})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var a=this;return r.a.createElement(D.Consumer,null,function(n){return e(n)?r.a.createElement(t,a.props):null})}}]),n}(r.a.Component);return Object(Be.a)(S.f,Ie)(a)}},Ge=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(_.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).removeDataHandler=function(e){a.props.removeCityData(e)},a}return Object(N.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.props.getCityData(this.props.userCityId)}},{key:"render",value:function(){var e=this,t=null;return t=""==this.props.listCity?r.a.createElement("div",{className:"addAccount"},r.a.createElement("h2",{className:"secondary__heading"},"Please add your city")):this.props.listCity.map(function(t){return r.a.createElement("div",{key:t.name},r.a.createElement(fe,{forUser:!0,cityName:t.name,temp:Math.round(t.main.temp),tempMin:t.main.temp_min,tempMax:t.main.temp_max,humidity:t.main.humidity,windSpeed:t.wind.speed,windDeg:t.wind.deg,remove:function(){return e.removeDataHandler(t.id)},description:t.weather[0].main}))}),r.a.createElement(ue.a,null,r.a.createElement("div",{className:"row col-6-of-12"},r.a.createElement("h1",{className:"primary__heading title"},"Save weather for your adventures")),0!==this.props.userCityId.length&&r.a.createElement("h2",{className:"secondary__heading",style:{marginTop:"6rem"}},"Your saved cities"),t)}}]),t}(n.Component),ze=Ve(function(e){return!!e})(Object(l.b)(function(e){return{userCityId:e.user.idList,listCity:e.user.listCity}},function(e){return{getCityData:function(t){return e(function(e){var t=e.join(",");console.log(t);var a="http://api.openweathermap.org/data/2.5/group?id=".concat(t,"&units=metric&appid=").concat(B.a.apiKeyOWM);return function(e){e({type:"GET_CITY_DATA_START"}),R.get(a).then(function(t){console.log(t),e(function(e){return{type:"GET_CITY_DATA_SUCCESS",listCity:e.data.list}}(t))}).catch(function(t){e(function(e){return{type:"GET_CITY_DATA_FAIL",err:e}}(t))})}}(t))},removeCityData:function(t){return e(function(e){return{type:"REMOVE_CITY_DATA",id:e}}(t))}}})(Ge)),Ye=function(e){var t=function(t){function a(){var e,t;Object(E.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=Object(_.a)(this,(e=Object(w.a)(a)).call.apply(e,[this].concat(r)))).state={authUser:""},t}return Object(N.a)(a,t),Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.auth.onAuthStateChanged(function(t){t?e.setState({authUser:t}):e.setState({authUser:null})})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return r.a.createElement(D.Provider,{value:this.state.authUser},r.a.createElement(e,null))}}]),a}(r.a.Component);return Object(Be.a)(Ie)(t)},Je={controls:{email:{elementType:"input",elementConfig:{type:"email",placeholder:"Email"},value:"",touched:!1,label:"Email",valid:!1}},isFormValid:!1,error:""},Ke=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(_.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state=Object(u.a)({},Je),a.onChangedHandler=function(e,t){var n;n=e.target.value.length>0?m(a.state.controls[t],{value:e.target.value,touched:!0,valid:!0}):m(a.state.controls[t],{value:e.target.value,touched:!0,valid:!1});var r=m(a.state.controls,Object(X.a)({},t,n));a.setState({controls:r});var i=!0;for(n in r)i=r[n].valid&&i;a.setState({isFormValid:i})},a.onSubmitHandler=function(e){var t=a.state.controls.email.value;e.preventDefault(),a.props.firebase.doPasswordReset(t).then(function(e){a.setState(Object(u.a)({},Je)),a.props.history.push(Se),console.log(e)}).catch(function(e){return a.setState({error:e})})},a}return Object(N.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this,t=r.a.createElement("div",{className:"col-12-of-12 errorMessage"},this.state.error?r.a.createElement("span",{className:"message"},this.state.error.message):r.a.createElement("span",{className:"message"},"Please enter your email"));return r.a.createElement("div",null,r.a.createElement("div",{className:"row col-6-of-12"},r.a.createElement("h1",{className:"primary__heading title"},"Forget Password?")),r.a.createElement("form",{style:{alignItems:"start"},className:"row col-6-of-12",onSubmit:this.onSubmitHandler},t,Object.entries(this.state.controls).map(function(t){return r.a.createElement("div",{className:"col-10-of-12"},r.a.createElement(te,{elementtype:t[1].elementType,elementconfig:t[1].elementConfig,value:t[1].value,changed:function(a){return e.onChangedHandler(a,t[0])},label:t[1].label,valid:t[1].valid,touched:t[1].touched}))}),r.a.createElement(re,{disabled:!this.state.isFormValid,btnType:"Btn-primary"},"Submit")))}}]),t}(n.Component),qe=Object(S.f)(Ie(Ke)),Qe=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(_.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!1,users:[]},a}return Object(N.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.props.firebase.users().on("value",function(t){var a=t.val();console.log(a);var n=Object.keys(a).map(function(e){return Object(u.a)({},a[e],{uid:e})});e.setState({users:n,loading:!1})})}},{key:"componentWillUnmount",value:function(){this.props.firebase.users().off()}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.loading&&r.a.createElement(_e,null),this.state.users.map(function(e){return r.a.createElement("li",{key:e.uid},"Account: ",e.email," ",e.uid,", Roles: ",e.roles?e.roles.ADMIN:null)}))}}]),t}(n.Component),Ze=Ie(Qe),Xe=Ye(function(e){function t(){return Object(E.a)(this,t),Object(_.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"container"},r.a.createElement(U,null)),r.a.createElement("div",{className:"container"},r.a.createElement(S.d,null,r.a.createElement(S.b,{path:Se,exact:!0,component:Ne}),r.a.createElement(S.b,{path:Oe,exact:!0,component:Ne}),r.a.createElement(S.b,{path:"/mycities",component:ze}),r.a.createElement(S.b,{path:"/login",component:Re}),r.a.createElement(S.b,{path:"/logout",component:We}),r.a.createElement(S.b,{path:"/pw-reset",component:qe}),r.a.createElement(S.b,{path:"/map",component:Z}),r.a.createElement(S.b,{path:"/admin",component:Ze}))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $e=a(60),et=a(40),tt=a(61),at=a.n(tt),nt=a(62),rt=a(63),it=a.n(rt),ot=s.d,ct=Object(s.c)({weather:h,auth:v,user:g}),st={key:"root",storage:it.a,stateReconciler:at.a},lt=Object(et.a)(st,ct),ut=Object(s.e)(lt,ot(Object(s.a)($e.a))),mt=Object(et.b)(ut),pt=r.a.createElement(l.a,{store:ut},r.a.createElement(De.Provider,{value:new Me},r.a.createElement(nt.a,{loading:null,persistor:mt},r.a.createElement(c.a,null,r.a.createElement(Xe,null)))));o.a.render(pt,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},20:function(e,t){e.exports={crossQuery:"https://crossorigin.me/",apiKeyOWM:"cd74f31f04d31585a62866b8b97edde1",googleAuth:{clientID:"177428683083-6j9n8pk24rbl9r0csm7gh16q8it1rjn3.apps.googleusercontent.com",clientSecret:"R8ipfh0e4nLsmgTYYvkZIab3"},FirebaseAuth:{apiKey:"AIzaSyCmfJF90oW3AVz03mtGtldBPOW37JUaTRU"},apiKeyGoogle:"https://maps.googleapis.com/maps/api/js?key=AIzaSyDndap1zM6oCgG_fb0ZNDS0ZR5PLv2_fOQ&libraries=places"}},30:function(e,t,a){e.exports={InputElement:"Input_InputElement__Ooq4A",invalid:"Input_invalid__376Oq",label:"Input_label__2JQJH"}},33:function(e,t,a){e.exports={Btn:"Button_Btn__3Gc_G","Btn-primary":"Button_Btn-primary__ROT0d",disabled:"Button_disabled__1p0kb"}},38:function(e,t,a){e.exports={SideNav:"SideNav_SideNav__1zFda",hidden:"SideNav_hidden__2zOrE"}},53:function(e,t,a){e.exports={DrawerToggle:"DrawerToggle_DrawerToggle__F1oPf"}},54:function(e,t,a){e.exports={Modal:"Modal_Modal__16SAR"}},57:function(e,t,a){e.exports={SearchForm:"SearchForm_SearchForm__1xXh2",toMapLink:"SearchForm_toMapLink__2BPxk","col-6-of-12":"SearchForm_col-6-of-12__26pP6",body:"SearchForm_body__3cWIO",container:"SearchForm_container__2dhk0","col-2-of-12":"SearchForm_col-2-of-12__3Q3Y1"}},58:function(e,t,a){e.exports={Spinner:"Spinner_Spinner__2AEm6",spin:"Spinner_spin__1Y3QT"}},67:function(e,t,a){e.exports=a(121)},76:function(e,t,a){},77:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){}},[[67,1,2]]]);
//# sourceMappingURL=main.77cd0b4a.chunk.js.map