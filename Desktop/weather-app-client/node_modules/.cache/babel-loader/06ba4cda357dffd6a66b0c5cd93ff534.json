{"ast":null,"code":"var _jsxFileName = \"/Users/buiquang/Desktop/weather-app-client/src/Container/SearchForm/SearchForm.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router';\nimport Input from '../../UI/Input/Input';\nimport Button from '../../UI/Button/Button';\nimport { updatedObject } from '../../shared/utility';\nimport * as actionCreators from '../../store/actions/index';\nimport { connect } from 'react-redux';\nimport Script from 'react-load-script';\nimport styles from './SearchForm.module.css';\n\nclass SearchForm extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      searchForm: {\n        city: {\n          elementType: 'input',\n          elementConfig: {\n            type: 'text',\n            placeholder: 'City',\n            id: 'City'\n          },\n          value: '',\n          label: 'City',\n          isValid: false\n        },\n        country: {\n          elementType: 'input',\n          elementConfig: {\n            type: 'text',\n            placeholder: 'Country',\n            id: 'Country'\n          },\n          value: '',\n          label: 'Country',\n          isValid: false\n        }\n      },\n      formValid: false\n    };\n\n    this.inputChangedHandler = (event, element) => {\n      let value = event.target.value;\n      let updatedElement = null;\n\n      if (value.length === 0) {\n        updatedElement = updatedObject(this.state.searchForm[element], {\n          isValid: false\n        });\n      } else {\n        updatedElement = updatedObject(this.state.searchForm[element], {\n          isValid: true,\n          value\n        });\n      }\n\n      ;\n      let updatedSearchForm = updatedObject(this.state.searchForm, {\n        [element]: updatedElement\n      });\n      let formValid = true;\n\n      for (updatedElement in updatedSearchForm) {\n        formValid = updatedSearchForm[updatedElement].isValid && formValid;\n      }\n\n      ;\n      this.setState({\n        searchForm: updatedSearchForm,\n        formValid\n      });\n    };\n\n    this.submitDataHandler = event => {\n      event.preventDefault();\n      let submitData = Object.keys(this.state.searchForm).map(el => {\n        return {\n          [el]: this.state.searchForm[el].value\n        };\n      });\n      this.props.fetchWeatherData(submitData);\n    };\n\n    this.handleScriptLoad = () => {\n      // Declare Options For Autocomplete\n      var options = {\n        types: ['(cities)']\n      }; // Initialize Google Autocomplete\n\n      /*global google*/\n      // To disable any eslint 'google not defined' errors\n\n      this.autocomplete = new google.maps.places.Autocomplete(document.getElementById('City'), options); // Avoid paying for data that you don't need by restricting the set of\n      // place fields that are returned to just the address components and formatted\n      // address.\n\n      this.autocomplete.setFields(['address_components', 'formatted_address']); // Fire Event when a suggested name is selected\n\n      this.autocomplete.addListener('place_changed', this.handlePlaceSelect);\n    };\n\n    this.handlePlaceSelect = () => {\n      // Extract City From Address Object\n      let addressObject = this.autocomplete.getPlace();\n      let address = addressObject.address_components; // Check if address is valid\n\n      if (address) {\n        // Set State\n        this.setState({\n          city: address[0].long_name,\n          query: addressObject.formatted_address\n        });\n      }\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"secondary__heading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"Search\"), React.createElement(\"form\", {\n      className: styles.SearchForm,\n      onSubmit: this.submitDataHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, Object.entries(this.state.searchForm).map(el => {\n      return React.createElement(\"div\", {\n        className: \"col-4-of-12\",\n        key: el[1].label,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(Script, {\n        url: \"https://maps.googleapis.com/maps/api/js?key=AIzaSyDyddX6wQCk9PY-jxHnZj_8X3M3RbzuJy4&libraries=places\",\n        onLoad: this.handleScriptLoad,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }), React.createElement(Input, {\n        elementtype: el[1].elementType,\n        elementconfig: el[1].elementConfig,\n        inputId: el[1].elementConfig.id,\n        label: el[1].label,\n        changed: event => this.inputChangedHandler(event, el[0]),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }));\n    }), React.createElement(Button, {\n      disabled: !this.state.formValid,\n      btnType: \"Btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"See weather\"), React.createElement(Button, {\n      btnType: \"Btn-primary\",\n      click: () => this.props.history.push('/map'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, \"Use Map\")));\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    fetchWeatherData: submitData => dispatch(actionCreators.fetchWeatherData(submitData))\n  };\n};\n\nexport default withRouter(connect(null, mapDispatchToProps)(SearchForm));","map":{"version":3,"sources":["/Users/buiquang/Desktop/weather-app-client/src/Container/SearchForm/SearchForm.js"],"names":["React","Component","withRouter","Input","Button","updatedObject","actionCreators","connect","Script","styles","SearchForm","state","searchForm","city","elementType","elementConfig","type","placeholder","id","value","label","isValid","country","formValid","inputChangedHandler","event","element","target","updatedElement","length","updatedSearchForm","setState","submitDataHandler","preventDefault","submitData","Object","keys","map","el","props","fetchWeatherData","handleScriptLoad","options","types","autocomplete","google","maps","places","Autocomplete","document","getElementById","setFields","addListener","handlePlaceSelect","addressObject","getPlace","address","address_components","long_name","query","formatted_address","render","entries","history","push","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter } from 'react-router';\nimport Input from '../../UI/Input/Input';\nimport Button from '../../UI/Button/Button';\nimport { updatedObject } from '../../shared/utility';\nimport * as actionCreators from '../../store/actions/index';\nimport { connect } from 'react-redux';\n\nimport Script from 'react-load-script';\nimport styles from './SearchForm.module.css';\n\nclass SearchForm extends Component {\n    state = {\n        searchForm: {\n            city: {\n                elementType: 'input',\n                elementConfig: {\n                    type: 'text',\n                    placeholder: 'City',\n                    id: 'City'\n                },\n                value: '',\n                label: 'City',\n                isValid: false\n            },\n            country: {\n                elementType: 'input',\n                elementConfig: {\n                    type: 'text',\n                    placeholder: 'Country',\n                    id: 'Country'\n                },\n                value: '',\n                label: 'Country',\n                isValid: false\n            }\n        },\n        formValid: false\n    }\n\n    inputChangedHandler = (event, element) => {\n        let value = event.target.value;\n        let updatedElement = null;\n\n        if (value.length === 0) {\n            updatedElement = updatedObject(this.state.searchForm[element], { isValid: false });\n        } else {\n            updatedElement = updatedObject(this.state.searchForm[element], { isValid: true, value });\n        };\n\n        let updatedSearchForm = updatedObject(this.state.searchForm, { [element]: updatedElement });\n        let formValid = true;\n\n        for (updatedElement in updatedSearchForm) {\n            formValid = updatedSearchForm[updatedElement].isValid && formValid;\n        };\n\n        this.setState({ searchForm: updatedSearchForm, formValid });\n    }\n\n    submitDataHandler = event => {\n        event.preventDefault();\n        let submitData = Object.keys(this.state.searchForm).map(el => {\n            return {\n                [el]: this.state.searchForm[el].value\n            }\n        })\n        this.props.fetchWeatherData(submitData);\n    }\n\n    handleScriptLoad = () => {\n        // Declare Options For Autocomplete\n        var options = {\n          types: ['(cities)'],\n        };\n    \n        // Initialize Google Autocomplete\n        /*global google*/ // To disable any eslint 'google not defined' errors\n        this.autocomplete = new google.maps.places.Autocomplete(\n          document.getElementById('City'),\n          options,\n        );\n    \n        // Avoid paying for data that you don't need by restricting the set of\n        // place fields that are returned to just the address components and formatted\n        // address.\n        this.autocomplete.setFields(['address_components', 'formatted_address']);\n    \n        // Fire Event when a suggested name is selected\n        this.autocomplete.addListener('place_changed', this.handlePlaceSelect);\n    }\n\n    handlePlaceSelect = () => {\n\n        // Extract City From Address Object\n        let addressObject = this.autocomplete.getPlace();\n        let address = addressObject.address_components;\n\n        // Check if address is valid\n        if (address) {\n            // Set State\n            this.setState(\n            {\n                city: address[0].long_name,\n                query: addressObject.formatted_address,\n            }\n            );\n        }\n        \n    }\n    \n    \n    render() {\n        return (\n            <div className=\"row\">\n                <h2 className=\"secondary__heading\">Search</h2>\n                <form className={styles.SearchForm} onSubmit={this.submitDataHandler}>\n                    {\n                        Object.entries(this.state.searchForm).map(el => {\n                            return (\n                                <div className=\"col-4-of-12\" key={el[1].label}>\n                                    <Script\n                                        url=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyDyddX6wQCk9PY-jxHnZj_8X3M3RbzuJy4&libraries=places\"\n                                        onLoad={this.handleScriptLoad}\n                                        />\n                                    <Input \n                                        elementtype={el[1].elementType} \n                                        elementconfig={el[1].elementConfig}\n                                        inputId={el[1].elementConfig.id}\n                                        label={el[1].label}\n                                        changed={event => this.inputChangedHandler(event, el[0])}/> \n                                </div>\n                            )\n                        })\n                    }\n                    <Button disabled={!this.state.formValid} btnType='Btn-primary'>See weather</Button>\n                    <Button btnType='Btn-primary' click={() => this.props.history.push('/map')}>Use Map</Button>\n                </form>\n            </div>\n        )\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        fetchWeatherData: (submitData) => dispatch(actionCreators.fetchWeatherData(submitData))\n    }\n}\n\nexport default withRouter(connect(null, mapDispatchToProps)(SearchForm));"]},"metadata":{},"sourceType":"module"}